<!DOCTYPE html>
<html>
<head>
	<title>CU-IEP 铝合金复合板检测服务</title>
	<meta charset="UTF-8">
	<meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes" />
	<link rel="stylesheet" href="css/base.css">
	<link rel="stylesheet" href="css/Almv2.css">
	<script type="text/javascript" src="js/jquery-2.1.4.js"></script>
	<script type="text/javascript" src="js/swiper.min.js"></script>
</head>
<body>
	<div class="top-box">
		<img class="huxideng" src="./img/top-bg-light.png">
		<img src="./img/bt.png">
		<p id="date"></p>
		<p id="time"></p>
	</div>
	<div class="left-box">
		<div class="jiaobiao">
			<img src="./img2/left-top.png">
			<img src="./img2/left-bottom.png">
			<img src="./img2/right-top.png">
			<img src="./img2/right-bottom.png">
		</div>
		<div class="big-title">
			<p>今日检测汇总记录</p>
		</div>
		<ul>
			<li id="norm">
				<div>
					<span id="name0">良品</span>
					<span id="count0"></span>
					<span id="rate0">90%</span>
				</div>
			</li>
			<!-- 漏底 -->
			<li id="defect1">
				<div class="box">
					<span id="name1">成型失败</span>
					<span>
						<div id="bar1" class="bar" style="width:50%"></div>
						<p id="count1">12次</p>
					</span>
					<span id="rate1">1%</span>
				</div>
			</li>
			<!-- 臟點 -->
			<li id="defect2">
				<div class="box">
					<span id="name2">无法识别</span>
					<span>
						<div id="bar2" class="bar" style="width:50%"></div>
						<p id="count2">12次</p>
					</span>
					<span id="rate2">1%</span>
				</div>
			</li>
			<!-- 擦花 -->
			<li id="defect3">
				<div class="box">
					<span id="name3">弯曲</span>
					<span>
						<div id="bar3" class="bar" style="width:30%"></div>
						<p id="count3">12次</p>
					</span>
					<span id="rate3">1%</span>
				</div>
			</li>
			<!-- 其他 -->
			<li id="defect4">
				<div class="box">
					<span id="name4">划痕</span>
					<span>
						<div id="bar4" class="bar" style="width:20%"></div>
						<p id="count4">12次</p>
					</span>
					<span id="rate4">1%</span>
				</div>
			</li>
			<!-- 桔皮 -->
			<li id="defect5">
				<div class="box">
					<span id="name5">划痕</span>
					<span>
						<div id="bar5" class="bar" style="width:60%"></div>
						<p id="count5">12次</p>
					</span>
					<span id="rate5">1%</span>
				</div>
			</li>
			<!-- 碰傷 -->
			<li id="defect6">
				<div class="box">
					<span id="name6">划痕</span>
					<span>
						<div id="bar6" class="bar" style="width:40%"></div>
						<p id="count6">12次</p>
					</span>
					<span id="rate6">1%</span>
				</div>
			</li>
			<!-- 起坑 -->
			<li id="defect7">
				<div class="box">
					<span id="name7">划痕</span>
					<span>
						<div id="bar7" class="bar" style="width:10%"></div>
						<p id="count7">12次</p>
					</span>
					<span id="rate7">1%</span>
				</div>
			</li>
			<!-- 橫條壓凹 -->
			<li id="defect8">
				<div class="box">
					<span id="name8">划痕</span>
					<span>
						<div id="bar8" class="bar" style="width:20%"></div>
						<p id="count8">12次</p>
					</span>
					<span id="rate8">1%</span>
				</div>
			</li>
			<!-- 凸粉 -->
			<li id="defect9">
				<div class="box">
					<span id="name9">划痕</span>
					<span>
						<div id="bar9" class="bar" style="width:50%"></div>
						<p id="count9">12次</p>
					</span>
					<span id="rate9">1%</span>
				</div>
			</li>
			<!-- 塗層開裂 -->
			<li id="defect10">
				<div class="box">
					<span id="name10">划痕</span>
					<span>
						<div id="bar10" class="bar" style="width:20%"></div>
						<p id="count10">12次</p>
					</span>
					<span id="rate10">1%</span>
				</div>
			</li>
			<!-- 不導電 -->
			<li id="defect11">
				<div class="box">
					<span id="name11">划痕</span>
					<span>
						<div id="bar11" class="bar" style="width:10%"></div>
						<p id="count11">12次</p>
					</span>
					<span id="rate11">1%</span>
				</div>
			</li>
			<!--  
			<li style="display:block" id="defect12">
				<div class="box">
					<span id="name12">划痕</span>
					<span>
						<div id="" class="bar" style="width:20%"></div>
						<p id="count12">12次</p>
					</span>
					<span id="rate12">1%</span>
				</div>
			</li>
			<li style="display:block" id="defect13">
				<div class="box">
					<span id="name13">划痕</span>
					<span>
						<div id="" class="bar" style="width:30%"></div>
						<p id="count13">12次</p>
					</span>
					<span id="rate13">1%</span>
				</div>
			</li>
			<li style="display:block" id="defect14">
				<div class="box">
					<span id="name14">划痕</span>
					<span>
						<div id="" class="bar" style="width:20%"></div>
						<p id="count14">12次</p>
					</span>
					<span id="rate14">1%</span>
				</div>
			</li>
			<li style="display:block" id="defect15">
				<div class="box">
					<span id="name15">划痕</span>
					<span>
						<div id="" class="bar" style="width:10%"></div>
						<p id="count15">12次</p>
					</span>
					<span id="rate15">1%</span>
				</div>
			</li>
			<li style="display:block" id="defect16">
				<div class="box">
					<span id="name16">划痕</span>
					<span>
						<div id="" class="bar" style="width:50%"></div>
						<p id="count16">12次</p>
					</span>
					<span id="rate16">1%</span>
				</div>
			</li>
			<li style="display:block" id="defect17">
				<div class="box">
					<span id="name17">划痕</span>
					<span>
						<div id="" class="bar" style="width:40%"></div>
						<p id="count17">12次</p>
					</span>
					<span id="rate17">1%</span>
				</div>
			</li>
			<li style="display:block" id="defect18">
				<div class="box">
					<span id="name18">划痕</span>
					<span>
						<div id="" class="bar" style="width:20%"></div>
						<p id="count18">12次</p>
					</span>
					<span id="rate18">1%</span>
				</div>
			</li>
			-->
		</ul>
	</div>
	<div class="center-box">
		<div class="jiaobiao">
			<img src="./img2/left-top.png">
			<img src="./img2/left-bottom.png">
			<img src="./img2/right-top.png">
			<img src="./img2/right-bottom.png">
		</div>
		<div class="center-box-title">
			<ul>
				<li></li>
				<li>
					<p>当前缺陷产品</p>
					<img class="img_1" src="./img2/left-air.png">
					<img class="img_2" src="./img2/right-air.png">
				</li>
				<li></li>
				<li></li>
				<li>
					<img class="img_2" src="./img2/dian.png">
					<img class="img_2" src="./img2/dian.png">
					<img class="img_2" src="./img2/dian.png">
					<img class="img_2" src="./img2/dian.png">
				</li>
			</ul>
			<img class="line-title" src="./img2/line-title.png">
		</div>
		<ul class="four-box">
			<li>
				<p>铝材编号</p>
				<p id="alCode"></p>
			</li>
			<li>
				<p>生产时间</p>
				<p id="proDate"></p>
			</li>
			<li>
				<p>边缘车间</p>
				<p id="facCode"></p>
			</li>
			<li>
				<p>问题特征</p>
				<p id="defectName"></p>
			</li>
		</ul>
		<ul class="banner">
			<li></li>
			<li  class="pic">
				<img src="./img2/zhezhao-top.png" style="position:absolute;z-index:99;width:100%">
				<div id="pic0">
					<img id="img0" src="./img/pro.png">
				</div>
			</li>
			<li class="build">
			    <img src="./img2/build.png">
			    <img class="guangshu"  src="./img2/big-guangshu.png">
			    <img class="guang" src="./img2/guang.png">
		   </li>
		</ul>
	</div>
	<div class="right-box">
		<div class="jiaobiao">
			<img src="./img2/left-top.png">
			<img src="./img2/left-bottom.png">
			<img src="./img2/right-top.png">
			<img src="./img2/right-bottom.png">
		</div>
		<div class="big-title">
			<p>缺陷产品历史记录</p>
		</div>
		<div class="table-box">
			<table class="table table-bordered" id="defectTable">
				<thead>
					<tr>
						<th>铝材编号</th>
						<th>生产时间</th> 
						<th>边缘车间</th>
						<th>问题特征</th> 
						<th>样品快照</th>
					</tr>
				</thead>
				<tbody>
					<!-- <tr>
						<td>ID:007</td>
						<td>14:44:47</td> 
						<td>E01</td>
						<td>划痕</td> 
						<td><img src="./img/pro.png"></td>
					</tr> -->
				</tbody>
			</table>
		</div>
	</div>
</body>
 <script type="text/javascript">
	function toPercent(num){
	    if (num==0) {
	        return 0;
	    }
	    var str=Number(num*100).toFixed(2);
	    str+="%";
	    return str;
	}
	$(function(){
		dataex();
		setInterval(dataex, 2000);
	});
	function dataex(){
		$.ajax({
			type : 'POST',
			url : 'aimv/getCheckStats',
			success : function(data){
				var norm = data.result.norm;
				var defect1 = data.result.defect1;
				var defect2 = data.result.defect2;
				var defect3 = data.result.defect3;
				var defect4 = data.result.defect4;
				var defect5 = data.result.defect5;
				var defect6 = data.result.defect6;
				var defect7 = data.result.defect7;
				var defect8 = data.result.defect8;
				var defect9 = data.result.defect9;
				var defect10 = data.result.defect10;
				var defect11 = data.result.defect11;
				/* var defect12 = data.result.defect12;
				var defect13 = data.result.defect13;
				var defect14 = data.result.defect14;
				var defect15 = data.result.defect15;
				var defect16 = data.result.defect16;
				var defect17 = data.result.defect17;
				var defect18 = data.result.defect18; */
				$("#name0").html(norm.checkResultName);
				$("#count0").html(norm.count);
				$("#rate0").html(toPercent(norm.rate));
				$("#name1").html(defect5.checkResultName);
				document.getElementById("bar1").style.width=toPercent(defect5.count/100);
				$("#count1").html(defect5.count);
				$("#rate1").html(toPercent(defect5.rate));
				$("#name2").html(defect10.checkResultName);
				document.getElementById("bar2").style.width=toPercent(defect10.count/100);
				$("#count2").html(defect10.count);
				$("#rate2").html(toPercent(defect10.rate));
				$("#name3").html(defect2.checkResultName);
				document.getElementById("bar3").style.width=toPercent(defect2.count/100);
				$("#count3").html(defect2.count);
				$("#rate3").html(toPercent(defect2.rate));
				$("#name4").html(defect11.checkResultName);
				document.getElementById("bar4").style.width=toPercent(defect11.count/100);
				$("#count4").html(defect11.count);
				$("#rate4").html(toPercent(defect11.rate));
				$("#name5").html(defect4.checkResultName);
				document.getElementById("bar5").style.width=toPercent(defect4.count/100);
				$("#count5").html(defect4.count);
				$("#rate5").html(toPercent(defect4.rate));
				$("#name6").html(defect6.checkResultName);
				document.getElementById("bar6").style.width=toPercent(defect6.count/100);
				$("#count6").html(defect6.count);
				$("#rate6").html(toPercent(defect6.rate));
				$("#name7").html(defect7.checkResultName);
				document.getElementById("bar7").style.width=toPercent(defect7.count/100);
				$("#count7").html(defect7.count);
				$("#rate7").html(toPercent(defect7.rate));
				$("#name8").html(defect3.checkResultName);
				document.getElementById("bar8").style.width=toPercent(defect3.count/100);
				$("#count8").html(defect3.count);
				$("#rate8").html(toPercent(defect3.rate));
				$("#name9").html(defect8.checkResultName);
				document.getElementById("bar9").style.width=toPercent(defect8.count/100);
				$("#count9").html(defect8.count);
				$("#rate9").html(toPercent(defect8.rate));
				$("#name10").html(defect9.checkResultName);
				document.getElementById("bar10").style.width=toPercent(defect9.count/100);
				$("#count10").html(defect9.count);
				$("#rate10").html(toPercent(defect9.rate));
				$("#name11").html(defect1.checkResultName);
				document.getElementById("bar11").style.width=toPercent(defect1.count/100);
				$("#count11").html(defect1.count);
				$("#rate11").html(toPercent(defect1.rate));
				/* $("#name12").html(defect12.checkResultName);
				$("#count12").html(defect12.count);
				$("#rate12").html(toPercent(defect12.rate));
				$("#name13").html(defect13.checkResultName);
				$("#count13").html(defect13.count);
				$("#rate13").html(toPercent(defect13.rate));
				$("#name14").html(defect14.checkResultName);
				$("#count14").html(defect14.count);
				$("#rate14").html(toPercent(defect14.rate));
				$("#name15").html(defect15.checkResultName);
				$("#count15").html(defect15.count);
				$("#rate15").html(toPercent(defect15.rate));
				$("#name16").html(defect16.checkResultName);
				$("#count16").html(defect16.count);
				$("#rate16").html(toPercent(defect16.rate));
				$("#name17").html(defect17.checkResultName);
				$("#count17").html(defect17.count);
				$("#rate17").html(toPercent(defect17.rate));
				$("#name18").html(defect18.checkResultName);
				$("#count18").html(defect18.count);
				$("#rate18").html(toPercent(defect18.rate)); */
				
				/* if(document.getElementById("defect1").style.display=="none"){
					document.getElementById("defect1").style.display="block";
				}else if(document.getElementById("defect1").style.display=="block"){
					document.getElementById("defect1").style.display="none";
				}
				if(document.getElementById("defect2").style.display=="none"){
					document.getElementById("defect2").style.display="block";
				}else if(document.getElementById("defect2").style.display=="block"){
					document.getElementById("defect2").style.display="none";
				}
				if(document.getElementById("defect3").style.display=="none"){
					document.getElementById("defect3").style.display="block";
				}else if(document.getElementById("defect3").style.display=="block"){
					document.getElementById("defect3").style.display="none";
				}
				if(document.getElementById("defect4").style.display=="none"){
					document.getElementById("defect4").style.display="block";
				}else if(document.getElementById("defect4").style.display=="block"){
					document.getElementById("defect4").style.display="none";
				}
				if(document.getElementById("defect5").style.display=="none"){
					document.getElementById("defect5").style.display="block";
				}else if(document.getElementById("defect5").style.display=="block"){
					document.getElementById("defect5").style.display="none";
				}
				if(document.getElementById("defect6").style.display=="none"){
					document.getElementById("defect6").style.display="block";
				}else if(document.getElementById("defect6").style.display=="block"){
					document.getElementById("defect6").style.display="none";
				}
				if(document.getElementById("defect7").style.display=="none"){
					document.getElementById("defect7").style.display="block";
				}else if(document.getElementById("defect7").style.display=="block"){
					document.getElementById("defect7").style.display="none";
				}
				if(document.getElementById("defect8").style.display=="none"){
					document.getElementById("defect8").style.display="block";
				}else if(document.getElementById("defect8").style.display=="block"){
					document.getElementById("defect8").style.display="none";
				}
				if(document.getElementById("defect9").style.display=="none"){
					document.getElementById("defect9").style.display="block";
				}else if(document.getElementById("defect9").style.display=="block"){
					document.getElementById("defect9").style.display="none";
				}
				if(document.getElementById("defect10").style.display=="none"){
					document.getElementById("defect10").style.display="block";
				}else if(document.getElementById("defect10").style.display=="block"){
					document.getElementById("defect10").style.display="none";
				}
				if(document.getElementById("defect11").style.display=="none"){
					document.getElementById("defect11").style.display="block";
				}else if(document.getElementById("defect11").style.display=="block"){
					document.getElementById("defect11").style.display="none";
				}
				if(document.getElementById("defect12").style.display=="none"){
					document.getElementById("defect12").style.display="block";
				}else if(document.getElementById("defect12").style.display=="block"){
					document.getElementById("defect12").style.display="none";
				}
				if(document.getElementById("defect13").style.display=="none"){
					document.getElementById("defect13").style.display="block";
				}else if(document.getElementById("defect13").style.display=="block"){
					document.getElementById("defect13").style.display="none";
				}
				if(document.getElementById("defect14").style.display=="none"){
					document.getElementById("defect14").style.display="block";
				}else if(document.getElementById("defect14").style.display=="block"){
					document.getElementById("defect14").style.display="none";
				}
				if(document.getElementById("defect15").style.display=="none"){
					document.getElementById("defect15").style.display="block";
				}else if(document.getElementById("defect15").style.display=="block"){
					document.getElementById("defect15").style.display="none";
				}
				if(document.getElementById("defect16").style.display=="none"){
					document.getElementById("defect16").style.display="block";
				}else if(document.getElementById("defect16").style.display=="block"){
					document.getElementById("defect16").style.display="none";
				}
				if(document.getElementById("defect17").style.display=="none"){
					document.getElementById("defect17").style.display="block";
				}else if(document.getElementById("defect17").style.display=="block"){
					document.getElementById("defect17").style.display="none";
				}
				if(document.getElementById("defect18").style.display=="none"){
					document.getElementById("defect18").style.display="block";
				}else if(document.getElementById("defect18").style.display=="block"){
					document.getElementById("defect18").style.display="none";
				} */
			},
			error : function(errorMsg){
				alert(errorMsg.msg);
			}
		});
		$.ajax({
			type : 'POST',
			url : 'aimv/getDefectReport',
			success : function(data){
				var list = data.result;
				$("#alCode").html(list[0].id);
				$("#proDate").html(list[0].checkTime);
				$("#facCode").html(list[0].factoryID);
				$("#defectName").html(list[0].checkResultName);
				var pic = document.getElementById("img0");
				pic.src = list[0].picDir;
				
				$("#defectTable tbody").html("")
				var row = "";
				for(var i=1; i<list.length; i++){
					row += "<tr><td>"+list[i].id+"</td><td>"
					+list[i].checkTime+"</td><td>"+list[i].factoryID+"</td><td>"
					+list[i].checkResultName+"</td><td><img src=\""+list[i].picDir+"\"></td>";
				}
				$("#defectTable tbody").append(row);
			},
			error : function(errorMsg){
				alert(errorMsg.msg);
			}
		});
	}
</script>
<script type="text/javascript">
	var setDateAndTime=setInterval("getNowFormatDate()", 1000);
	function getNowFormatDate() {
	    var date = new Date();
	    var seperator1 = "-";
	    var seperator2 = ":";
	    var month = date.getMonth() + 1;
	    var strDate = date.getDate();
	    var strHour = date.getHours();
	    var strMinute = date.getMinutes();
	    var strSecond = date.getSeconds();
	    if (month >= 1 && month <= 9) {
	        month = "0" + month;
	    }
	    if (strDate >= 0 && strDate <= 9) {
	        strDate = "0" + strDate;
	    }
	    if (strHour >= 1 && strHour <= 9) {
	    	strHour = "0" + strHour;
	    }
	    if (strMinute >= 0 && strMinute <= 9) {
	    	strMinute = "0" + strMinute;
	    }
	    if (strSecond >= 0 && strSecond <= 9) {
	    	strSecond = "0" + strSecond;
	    }
	    var currentDate = date.getFullYear() + seperator1 + month + seperator1 + strDate
	    var currentTime = strHour + seperator2 + strMinute + seperator2 + strSecond;
	    document.getElementById("date").innerHTML=currentDate;
	    document.getElementById("time").innerHTML=currentTime;
	}
</script>
</html>